<div class="modal-header">
    <h5 class="modal-title pull-left">{{title}}</h5>
    <button type="button" class="close pull-right" aria-label="Close" (click)="bsModalRef.hide()">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">
    <form  *ngIf="progress | async; else loading" [formGroup]="form"
          (ngSubmit)="form.valid && confirm($event)">

        <input 
            id="progress_id" 
            formControlName="progress_id"
             />
        <input 
            id="action_id" 
            formControlName="action_id"
             />
        <input 
            id="channel_id" 
            formControlName="channel_id"
             />
<!--        type="hidden"                -->
        <div class="form-row">
        
            <div class="form-group col-md-6">
                <label for="owner">Responsáveis</label>
                <input 
                    id="owner" 
                    formControlName="owner"
                    type="text" 
                    class="form-control" 
                    placeholder="Responsáveis"/>
                    <small id="owner" class="form-text text-muted">Degite os responssáveis pela ação.</small>
            </div>  

            
            <div class="col-md-3 mb-3">
                <label for="status">Situação</label>
                <dropdown-improvement-status (changeEvent)="setStatus($event)"></dropdown-improvement-status>
            </div>
            
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="description">Descrição</label>
                <input 
                    id="description" 
                    formControlName="description"
                    type="text" 
                    class="form-control" 
                    placeholder="Descrição"/>
                <small id="description" class="form-text text-muted">Descreva a ação tomada.</small>
            </div>
        </div>

        <div class="form-row">            
            <div class="form-group col-md-6">
            <label for="starts_at">Data de início</label>
            <input 
                name="starts_at" 
                [(ngModel)]="progress.starts_at" 
                #starts_at="ngModel"
                type="date"
                class="form-control form-control-no-border"
                required autofocus>
            </div>

            <div class="form-group col-md-6">
                <label for="finished_at">Data de conclusão</label>
                <input 
                    name="finished_at" 
                    [(ngModel)]="progress.finished_at" 
                    #finished_at="ngModel"
                    type="date"
                class="form-control form-control-no-border">
            </div>
        </div>
            <button 
                type="submit" 
                class="btn btn-outline-primary" 
                [disabled]="!form.valid">Confirmar</button>            
    </form>
    <ng-template #loading>
        Carregando...
    </ng-template>        
</div>
<div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" (click)="bsModalRef.hide()">Fechar</button>
</div>